# 유비쿼터스 언어

| 용어                    | 설명                                                    |
| --------------------- | ----------------------------------------------------- |
| Product               | 우리 서비스에서 취급하는 상품                                      |
| Like                  | 사용자가 상품(Product) 혹은 브랜드(Brand)에 표시한 호감 (비슷한 의미로는 '찜') |
| Product Option        | 상품에 포함되는 변경 가능한 선택지들 (e.g. 색상, 사이즈 등)                |
| Product Specification | 상품 자체의 고정된 정보 (e.g. 소재, 제조사, 제조국, 취급 주의사항 등)          |
| Product Description   | 판매자가 작성한 자유 형태 설명 (e.g. 상품 상세설명)                      |
| Brand Description     | 브랜드에 대해 브랜드 소유자가 작성한 자유 형태 설명 (e.g. 브랜드 소개글)          |

---

# 요구사항 정의

## 브랜드

### 기능적 요구사항

#### Happy Path

+ 사용자는 로그인 여부와 무관하게 브랜드 정보 조회를 할 수 있다.
+ 브랜드 정보를 조회하면 브랜드에 대한 정보와 브랜드가 보유한 상품에 대한 정보를 알 수 있다.

#### Fail Cases

+ 브랜드가 존재하지 않으면 오류를 반환한다.

### 비기능적 요구사항

+ 로그인 여부와 무관하게 브랜드 정보 조회가 가능하다
+ 오류 상황에서는 명확한 HTTP 상태코드와 에러메시지를 반환한다.

| 케이스             | 설명             | HTTP 상태코드     |
| :-------------- | :------------- | :------------ |
| 브랜드가 존재하지 않는 경우 | 1. 잘못된 brandId | 404 Not Found |

## 상품

### 기능적 요구사항

#### Happy Path

+ 상품 목록을 조회하면 브랜드에 정보와 상품에 대한 정보를 알 수 있다.
+ 상품 목록 조회 시 특정 브랜드에 대해서만 필터링을 할 수 있다.
+ 상품 목록 조회 시 상품 등록순, 가격순, 좋아요순에 대해서 필터링을 할 수 있다.
+ 상품 정보를 조회하면 브랜드에 대한 정보와 상품에 대한 상세 정보를 알 수 있다.
+ 상품 목록과 상품 정보를 조회하면 해당 상품에 대한 총 좋아요 수를 알 수 있다.

#### Fail Cases

+ 상품이 존재하지 않으면 오류를 반환한다.
+ 상품이 판매중이 아니라면 오류를 반환한다.

### 비기능적 요구사항

+ 오류 상황에서는 명확한 HTTP 상태코드와 에러메시지를 반환한다.

| 케이스             | 설명                        | HTTP 상태코드     |
| :-------------- | :------------------------ | :------------ |
| 상품이 존재하지 않는 경우  | 1. 잘못된 productId          | 404 Not Found |

## 좋아요

### 기능적 요구사항

#### Happy Path

+ 로그인한 사용자에 한해 존재하는 상품에 대해 좋아요를 할 수 있다.
+ 상품에 대한 좋아요 추가/해제 기능은 멱등하게 동작하여야 한다.
+ 좋아요 동작 시 해당 상품의 좋아요 수가 증가한다.

#### Fail Cases

+ 로그인 하지 않은 사용자는 좋아요를 할 수 없다.
+ 존재하지 않는 상품에 대해 좋아요를 할 수 없다.

### 비기능적 요구사항

+ 사용자 인증은 `X-USER-ID` Header 기반으로 처리된다.
+ 오류 상황에서는 명확한 HTTP 상태코드와 에러메시지를 반환한다.

| 케이스            | 설명                            | HTTP 상태코드       |
| :------------- | :---------------------------- | :-------------- |
| 상품이 존재하지 않는 경우 | 1. 잘못된 productId              | 404 Not Found   |
| 미로그인           | 1. 사용자 정보가 없음 <br>2. 인증 헤더 없음 | 401 Unauthorized |

## 주문 / 결제

### 기능적 요구사항

#### Happy Path

+ 상품아이디와 수량의 조합 형태로 주문을 요청할 수 있다.
+ 로그인한 사용자가 주문을 시도했을 때 상품의 재고가 남아있다면 주문이 성공한다.
+ 주문에 성공하면 상품의 재고가 주문 수량만큼 감소하고 유저의 포인트가 (상품의 가격 * 주문 수량) 만큼 차감된다.
+ 주문에 성공하면 외부 시스템으로 주문 정보가 전송된다.

#### Fail Cases

+ 로그인하지 않은 유저가 주문을 시도하면 주문에 실패한다.
+ 존재하지 않는 상품에 대해 주문을 시도하면 주문에 실패한다.
+ 재고가 부족할 경우 주문에 실패한다.
+ 포인트가 부족할 경우 주문에 실패한다.


### 비기능적 요구사항

+ 사용자 인증은 `X-USER-ID` Header 기반으로 처리된다.
+ 오류 상황에서는 명확한 HTTP 상태코드와 에러메시지를 반환한다.

| 케이스            | 설명                            | HTTP 상태코드       |
| :------------- | :---------------------------- | :-------------- |
| 상품이 존재하지 않는 경우 | 1. 잘못된 productId              | 404 Not Found   |
| 미로그인           | 1. 사용자 정보가 없음 <br>2. 인증 헤더 없음 | 401 Unauthorized |
|재고가 부족할 경우|1. 재고 보유량보다 주문 수량이 더 많을 경우|400 Bad Request|
|포인트가 부족할 경우|1. (상품가격 * 주문 수량) 보다 포인트가 적을 경우|400 Bad Request|